{"ast":null,"code":"var _jsxFileName = \"/Users/sanjaysuman/One Tappe/OneTappeProject/frontend/src/components/InvoiceGenerator.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\nimport { Box, Button, FormControl, FormLabel, Input, Select, VStack, HStack, Text, useToast, Heading, Divider } from '@chakra-ui/react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst InvoiceGenerator = () => {\n  _s();\n  const {\n    orderId\n  } = useParams();\n  const [discountType, setDiscountType] = useState('percent');\n  const [discountValue, setDiscountValue] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const toast = useToast();\n  const handleDiscountTypeChange = e => {\n    setDiscountType(e.target.value);\n  };\n  const handleDiscountValueChange = e => {\n    setDiscountValue(e.target.value);\n  };\n  const generateInvoice = async (withDiscount = false) => {\n    setIsLoading(true);\n    try {\n      let url = `/seller/invoices/${orderId}`;\n      if (withDiscount) {\n        url = `/seller/invoices/${orderId}/with-discount?discount_type=${discountType}&discount_value=${discountValue}`;\n      }\n      const response = await axios.get(url, {\n        responseType: 'blob'\n      });\n\n      // Create a blob from the PDF Stream\n      const file = new Blob([response.data], {\n        type: 'application/pdf'\n      });\n\n      // Build a URL from the file\n      const fileURL = URL.createObjectURL(file);\n\n      // Open the URL on new Window\n      const pdfWindow = window.open();\n      pdfWindow.location.href = fileURL;\n      toast({\n        title: 'Invoice generated',\n        description: 'The invoice has been generated successfully.',\n        status: 'success',\n        duration: 5000,\n        isClosable: true\n      });\n    } catch (error) {\n      console.error('Error generating invoice:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to generate invoice. Please try again.',\n        status: 'error',\n        duration: 5000,\n        isClosable: true\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    p: 5,\n    shadow: \"md\",\n    borderWidth: \"1px\",\n    borderRadius: \"md\",\n    children: [/*#__PURE__*/_jsxDEV(Heading, {\n      size: \"md\",\n      mb: 4,\n      children: \"Generate Invoice\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {\n      mb: 4\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(VStack, {\n      spacing: 4,\n      align: \"stretch\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        colorScheme: \"blue\",\n        isLoading: isLoading,\n        onClick: () => generateInvoice(false),\n        width: \"full\",\n        children: \"Generate Standard Invoice\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        fontWeight: \"bold\",\n        mt: 4,\n        children: \"Apply Discount\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n          children: \"Discount Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: discountType,\n          onChange: handleDiscountTypeChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"percent\",\n            children: \"Percentage (%)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"amount\",\n            children: \"Fixed Amount ($)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n          children: discountType === 'percent' ? 'Discount Percentage' : 'Discount Amount'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"number\",\n          value: discountValue,\n          onChange: handleDiscountValueChange,\n          min: \"0\",\n          max: discountType === 'percent' ? '100' : undefined,\n          step: \"0.01\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        colorScheme: \"green\",\n        isLoading: isLoading,\n        onClick: () => generateInvoice(true),\n        width: \"full\",\n        mt: 2,\n        children: \"Generate Invoice with Discount\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(InvoiceGenerator, \"hMVisemH32a256z99R27VbJS3wM=\", false, function () {\n  return [useParams, useToast];\n});\n_c = InvoiceGenerator;\nexport default InvoiceGenerator;\nvar _c;\n$RefreshReg$(_c, \"InvoiceGenerator\");","map":{"version":3,"names":["React","useState","axios","useParams","Box","Button","FormControl","FormLabel","Input","Select","VStack","HStack","Text","useToast","Heading","Divider","jsxDEV","_jsxDEV","InvoiceGenerator","_s","orderId","discountType","setDiscountType","discountValue","setDiscountValue","isLoading","setIsLoading","toast","handleDiscountTypeChange","e","target","value","handleDiscountValueChange","generateInvoice","withDiscount","url","response","get","responseType","file","Blob","data","type","fileURL","URL","createObjectURL","pdfWindow","window","open","location","href","title","description","status","duration","isClosable","error","console","p","shadow","borderWidth","borderRadius","children","size","mb","fileName","_jsxFileName","lineNumber","columnNumber","spacing","align","colorScheme","onClick","width","fontWeight","mt","onChange","min","max","undefined","step","_c","$RefreshReg$"],"sources":["/Users/sanjaysuman/One Tappe/OneTappeProject/frontend/src/components/InvoiceGenerator.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\nimport {\n  Box,\n  Button,\n  FormControl,\n  FormLabel,\n  Input,\n  Select,\n  VStack,\n  HStack,\n  Text,\n  useToast,\n  Heading,\n  Divider,\n} from '@chakra-ui/react';\n\nconst InvoiceGenerator = () => {\n  const { orderId } = useParams();\n  const [discountType, setDiscountType] = useState('percent');\n  const [discountValue, setDiscountValue] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const toast = useToast();\n\n  const handleDiscountTypeChange = (e) => {\n    setDiscountType(e.target.value);\n  };\n\n  const handleDiscountValueChange = (e) => {\n    setDiscountValue(e.target.value);\n  };\n\n  const generateInvoice = async (withDiscount = false) => {\n    setIsLoading(true);\n    try {\n      let url = `/seller/invoices/${orderId}`;\n      \n      if (withDiscount) {\n        url = `/seller/invoices/${orderId}/with-discount?discount_type=${discountType}&discount_value=${discountValue}`;\n      }\n      \n      const response = await axios.get(url, {\n        responseType: 'blob',\n      });\n      \n      // Create a blob from the PDF Stream\n      const file = new Blob([response.data], { type: 'application/pdf' });\n      \n      // Build a URL from the file\n      const fileURL = URL.createObjectURL(file);\n      \n      // Open the URL on new Window\n      const pdfWindow = window.open();\n      pdfWindow.location.href = fileURL;\n      \n      toast({\n        title: 'Invoice generated',\n        description: 'The invoice has been generated successfully.',\n        status: 'success',\n        duration: 5000,\n        isClosable: true,\n      });\n    } catch (error) {\n      console.error('Error generating invoice:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to generate invoice. Please try again.',\n        status: 'error',\n        duration: 5000,\n        isClosable: true,\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Box p={5} shadow=\"md\" borderWidth=\"1px\" borderRadius=\"md\">\n      <Heading size=\"md\" mb={4}>Generate Invoice</Heading>\n      <Divider mb={4} />\n      \n      <VStack spacing={4} align=\"stretch\">\n        <Button\n          colorScheme=\"blue\"\n          isLoading={isLoading}\n          onClick={() => generateInvoice(false)}\n          width=\"full\"\n        >\n          Generate Standard Invoice\n        </Button>\n        \n        <Text fontWeight=\"bold\" mt={4}>Apply Discount</Text>\n        \n        <FormControl>\n          <FormLabel>Discount Type</FormLabel>\n          <Select value={discountType} onChange={handleDiscountTypeChange}>\n            <option value=\"percent\">Percentage (%)</option>\n            <option value=\"amount\">Fixed Amount ($)</option>\n          </Select>\n        </FormControl>\n        \n        <FormControl>\n          <FormLabel>\n            {discountType === 'percent' ? 'Discount Percentage' : 'Discount Amount'}\n          </FormLabel>\n          <Input\n            type=\"number\"\n            value={discountValue}\n            onChange={handleDiscountValueChange}\n            min=\"0\"\n            max={discountType === 'percent' ? '100' : undefined}\n            step=\"0.01\"\n          />\n        </FormControl>\n        \n        <Button\n          colorScheme=\"green\"\n          isLoading={isLoading}\n          onClick={() => generateInvoice(true)}\n          width=\"full\"\n          mt={2}\n        >\n          Generate Invoice with Discount\n        </Button>\n      </VStack>\n    </Box>\n  );\n};\n\nexport default InvoiceGenerator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}